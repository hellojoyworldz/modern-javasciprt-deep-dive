# CH6. 데이터 타입

데이터 타입(data type): 값의 종류

- 원시타입: 변경 불가능한 값.
- 객체(참조)타입: 변경 가능한 값.

> 참고: https://velog.io/@junh0328/DEEP-DIVE-한-장-요약-원시-타입과-객체-타입

| 구분                                  | 데이터 타입     | 설명                                              |
| :------------------------------------ | :-------------- | :------------------------------------------------ |
| 원시타입(primitive type)              | 숫자(number)    | 정수와 실수 구분 없이 하나의 숫자 타입만 존재     |
| ^                                     | 문자열(string)  | 문자열                                            |
| ^                                     | 불리언(boolean) | 논리적 참(true)과 거짓(false)                     |
| ^                                     | undefined       | var 키워드로 선언된 변수에 암묵적으로 할당되는 값 |
| ^                                     | null            | 값이 없다는 것을 의도적으로 명시                  |
| ^                                     | 심벌(symbol)    | ES6에서 추가                                      |
| 객체(참조)타입(object/reference type) |                 | 객체, 함수, 배열 등                               |

## 6-1. 숫자 타입 (number)

<details open>
  <summary>💡 SUMMARY</summary>

- 숫자 타입은 실수(소수점 이하가 있는 수) 처리하여 계산한다.
- 메모리에 2진수로 저장하고 10진수로 참조한다.
- 메모리에 2진수로 저장할 떄 제한된 메모리를 떄문에 근사값을 사용하므로 예상치 못한 결과를 얻을 수 있다 (0.1+0.2 != 0.3)
</details>

---

C나 자바의 경우 정수(소수점 이하가 없는 수)와 실수(소수점 이하가 있는 수)를 구분하여 다양한 숫자 타입을 제공하지만 **자바스크립트는 하나의 숫자 타입만** 존재한다.  
ESMAScript 사양에 따르면 숫자 타입의 값은 **배정밀도 64비트 부동소수점** 형식을 따른다.

|            |   32bit(단정밀도)   |   64bit(배정밀도)   |
| :--------: | :-----------------: | :-----------------: |
| 고정소수점 | 단정밀도 고정소수점 | 배정밀도 고정소수점 |
| 부동소수점 | 단정밀도 부동소수점 | 배정밀도 부동소수점 |

### 고정소수점 방식

고정소수점: 소수점의 위치를 고정시켜 표현하는 방식

-2.75 -> 1 <span style="color:red">000000000000010(정수)</span> <span style="color:blue">1100000000000000(소수)</span>

| 색상                                 | bit   | 설명                         |
| ------------------------------------ | ----- | ---------------------------- |
| 검정                                 | 1bit  | 부호 표현 - 양수(0), 음수(1) |
| <span style="color:red">빨강</span>  | 16bit | 정수 표현 (2진수)            |
| <span style="color:blue">파랑</span> | 16bit | 소수 표현 (2진수)            |

### 부동소수점 방식

부동소수점: 소수점의 위치를 고정시키지 않고 가수와 지수를 이용하는 방식

26.625 -> 11010.101(2진수) -> + 1.<span style="color:red">1010101(가수)</span> X 2<sup style="color:blue">4(지수)</sup>

| 색상                                 | 설명                    |
| ------------------------------------ | ----------------------- |
| 검정                                 | 부호 - 양수(0), 음수(1) |
| <span style="color:red">빨강</span>  | 가수                    |
| <span style="color:blue">파랑</span> | 지수                    |

### 배정밀도(64bit) 부동소수점 방식

26.625 -> 1 <sup style="color:blue">1000000001(지수부)</span> <span style="color:red">1010101000000000000000000000000000000000000000000000(가수부)</span>

| 구분             | 부호 | <span style="color:blue">지수부</span> | <span style="color:red">가수부</span>            |
| ---------------- | ---- | -------------------------------------- | ------------------------------------------------ |
| 단정밀도 - 32bit | 1bit | 8bit - 127 초과수로 지수 저장          | 23bit - 왼쪽부터 저장하고 나머지 비트 0으로 채움 |
| 배정밀도 - 64bit | 1bit | 11bit -1023 초과수로 지수 저장         | 52bit - 왼쪽부터 저장하고 나머지 비트 0으로 채움 |

- 127 초과수: 원래의 수에 127을 더하고 구 수를 이진수로 표현한 수
- 1023 초과수: 원래의 수에 1023을 더한 수를 이진수로 표현한 수
  ![이미지](./%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-06-18%20%EC%98%A4%ED%9B%84%2010.07.46.png)

![이미지](./%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-06-18%20%EC%98%A4%ED%9B%84%2011.18.50.png)

> 참고: https://aeunhi99.tistory.com/323, https://hbsowo58.tistory.com/460

### 0.1 + 0.2 === 0.3 ?

부동소수점 방식은 제한된 길이 64bit 안에 긴 소수점까지도 표현해야되기 때문에 근사값을 사용한다.  
따라서 부동소수점으로 표현된 소수는 정확한 값이 아니다.

```javascript
console.log(0.1 + 0.2); // 0.3000000000004
0.1 + 0.2 === 0.3; // false
```

![이미지](./%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-06-18%20%EC%98%A4%ED%9B%84%2010.32.22.png)

> 참고: https://www.youtube.com/watch?v=RIiq4tTt6rI

### 하나의 숫자 타입 - 실수 처리

정리하자면, 모든 수를 실수(소수점 이하가 있는 숫자)로 처리한다.  
정수(소수점 이하가 없는 숫자)만 표현하기 위한 데이터타입(integer type)이 별도로 존재하지 않는다.

```javascript
// 정수로 표시된다 해도 사실은 실수라는 것을 의미.
console.log(1 === 1.0); //true

// 따라서 정수로 표시되는 수끼리 나누더라도 실수가 나올 수 있다.
console.log(3 / 2); //1.5
```

### 2진수로 저장, 10진수로 참조

정수, 실수, 2진수, 8진수, 16진수 리터럴은 모두 배정밀도 64비트 부동소수점 형식으로 **메모리에 2진수로 저장되며 값을 참조하면 모두 10진수로 해석**된다.

```javascript
// 모두 숫자 타입이다.
var integer = 10;
var double = 10.12;
var negative = -20;
var binary = 0b01000001;
var octal = 0o101;
var hex = 0x41;

console.log(binary); //65
console.log(binary); //65
console.log(binary); //65
console.log(binary === octal); //true
console.log(octal === hex); //true
```

### Infinity, -Infinity, NaN

숫자 타입의 세가지 특별한 값

- Infinity: 양의 무한대
- -Infinity: 음의 무한대
- NaN: 연산 불가 not a number. ( 자바스크립트는 대소문자를 구별하므로 주의 ex. nan 으로 표현 x )

```javascript
console.log(10 / 0); //Infinity
console.log(10 / -0); //-Infinity
console.log(1 * "string"); //NaN
```

## 6-2. 문자열 타입 (string)

- 문자열 타입은 텍스트 데이터를 나타내는 데 사용한다.
- 문자열은 0개 이상의 16 비트 유니코드 문자(UTF-16)의 집합으로 전 세계 대부분의 문자를 표현할 수 있다.
- **작은따옴표('')**, 큰따옴표(""), 백틱(``) 으로 텍스트를 감싸며 보통 작은따옴표를 사용한다.
- 따옴표로 감싸는 이유는 키워드나 식별자 같은 토큰과 구별하기 위해서이다.
- 작은따옴표로 감싼 문자열 내의 큰따옴표는 문자열로 인식된다.(반대도 마찬가지)
- 문자열은 원시 타입으로 변경 불가능한 값이다.

### 문자열과 불변성 (11-1-1절)

```javascript
var str = "hello";
str = "hi";
```

두 번째 문이 실행하면 메모리에서 'hello'를 수정하는 것이 아니라 새로운 문자열 'hi'를 메모리에 생성하고 식별자 str은 이것을 가리킨다.  
이처럼 기존 문자열을 변경하는 것이 아니라 새로운 문자열을 새롭게 할당한다.

## 6-3. 템플릿 리터럴(template literal)

- 템플릿 리터럴은 런타임에 일반 문자열로 변환되어 처리된다.
- 백틱(``)을 사용해 표현한다.
- 멀티라인 문자열, 표현식 삽입, 태그드 템플릿 등 편리한 문자열 처리 기능을 제공한다.
- 줄바꿈(개행)이 허용되지 않는다.

### 6-3-1. 멀티라인 문자열(multi line string)

- 일반 문자열 내에서 줄바꿈과 공백을 표현하려면 이스케이프 시퀀스(escape sequence)를 사용해야 한다.
- 템플릿 리터럴 내에서는 줄바꿈과 공백이 허용된다.

```javascript
// 일반 문자열
var template = "Hello\nworld."; // 이스케이프 시퀀스(제어 시퀀스)는 \(백슬래시) 뒤에 문자나 숫자가 조합되며 문자열 안에서 줄바꿈과 공백 등 특별한 의미를 갖는 문자열

// 템플릿 리터럴
var htmlTemplate = `Hello
world`;
```

### 6-3-2. 표현식 삽입

- 문자열은 문자열 연산자 + 를 사용하여 연결할 수 있다.
- 표현식 리터럴 내에서는 ${} 으로 감싸는 표현식 삽입을 통해 문자열을 삽입할 수 있다.
- 이때 표현식의 평가 결과가 문자열이 아니더라도 문자열로 타입이 강제로 변환된다.

```javascript
var first = "Ung-mo";
var last = "Lee";

// ES5 문자열 연결
console.log("My name is" + first + " " + last);

//ES6 표현식 삽입
console.log(`My name is ${first} ${last}`);

// 문자열로 강제 변환
console.log(`1 + 2 = ${1 + 2}`); 1 + 2 = 3
```

## 6-4. 불리언 타입

참과 거짓을 나타내는 true, false

## 6-5. undefined 타입

- 변수 선언만 하고 값을 할당하지 않은 상태이다.(즉 초기화되지 않은 변수)
- 변수 선언에 의해 확보된 메모리 공간을 빈 상태로 내버려두지 않고 undefined로 초기화한다.
- undefined는 개발자가 의도적으로 할당하기 위한 값이 아니다.
- 자바스크립트 엔진이 변수를 초기화 할 때 사용하는 값이다.

```javascript
var foo; // 선언만 하고 값 할당 X
console.log(foo); // undefined
```

## 6-6. null 타입

- 변수에 값이 없다는 것을 명시하고 싶을 때 사용한다.
- 변수가 이전에 참조하던 값을 더이상 참조하지 않겠다는 의미이다.
- 참조하지 않는 메모리 공간에 대해 자바스크립트 엔진은 가비지 콜렉션을 수행할 것이다.
- 함수가 유효한 값을 반환할 수 없는 경우 명시적으로 null을 반환한다.

```javascript
// 변수가 참조하던 값을 더이상 참조하지 않음
var foo = "Lee";
console.log(foo); // Lee
foo = null;
console.log(foo); // null

// 함수가 유효한 값을 반환할 수 없을 경우
var element = document.querySelector(".myClass");
console.log(element); //null - HTML 문서에 myClass 클래스를 갖는 요소가 없으면 null 반환
```

## 6-7. Symbol 타입

- 다른 값과 중복되지 않는 유일무이한 값.
- 충돌할 위험이 없는 객체의 유일한 프로퍼티 키를 만들기 위해 사용한다.
- Symbol 함수를 호출해 생성하고 이 때 생성된 심벌값은 외부에 노출되지 않으며 다른 값과 절대 중복되지 않는 유일무이한 값이다.

```javascript
var key = Symbol("key");
console.log(typeof key); //symbol

var obj = {};
obj[key] = "value";
console.log(obj[key]); //value
```

## 6-8. 객체 타입

- 객체는 변경 가능한 값이다.
- 객체, 함수, 배열 등이 있다.

## 6-9. 데이터 타입의 필요성

- 데이터 타입에 따라 확보해야 할 메모리 공간의 크기가 결정된다. (손실 없이 값을 저장하기 위해)
- 값을 참조할 때 데이터 타입에 따라 한번에 읽어 들여야 할 메모리 공간의 크기를 결정한다. (숫자는 8바이트)
- 메모리에 저장된 값은 데이터 타입에 따라 다르게 해석된다. ( 0100 0001 숫자로 65, 문자열로 A)

```javascript
var num = 100;
// 숫자 타입이므로 8바이트의 메모리 공간을 확보 (메모리셀 8칸)
// 2진수로 변환하여 저장 (배정밀도 64비트 부동소수점 형식)

console.log(num);
// 식별자 num을 통해 선두 메모리 셀의 주소로 찾아감
// 데이터 타입이 숫자이므로 8바이트 단위로 읽어들임
// 데이터 타입이 숫자이므로 숫자로 해석
```

## 6-10. 동적 타이핑

- 자바스크립트는 변수를 선언할 때 타입을 선언하지 않고 키워드(var, let, const)를 사용한다.
- 자바스크립트는 할당에 의해 타입이 결정되는 타입 추론(type inference)이다.
- 재할당에 의해 변수의 타입은 동적으로 변할 수 있는 동적 타이핑(dynamic typing)이다.

```javascript
// c언어
// int foo; int: 4바이트 정수 데이터 타입

//javascript
var foo; // 숫자 타입인지 문자 타입인지 알 수 없음
var num = 10; // 값을 할당해야 타입을 알 수 있음 : 타입 추론
num = "String"; // 값을 재할당 함으로써 타입이 숫자 -> 문자 타입으로 변함 : 동적 타이핑
```

정적 타입 언어

- 변수를 선언할 때 데이터 타입을 선언한다.(명시적 타입 선언)
- 변수의 타입을 변경할 수 없다.
- 변수의 타입에 맞는 값만 할당할 수 있다.
- 컴파일 시점에서 타입체크를 수행하고, 통과하지 못하면 에러를 발생시킨다.
- 타입의 일관성을 강제함으로써 안정적은 코드 구현한다.
- ex) C, C++, 자바

동적 타입 언어

- 변수에 어떤 데이터 타입의 값이라도 자유롭게 할당한다.
- 변수는 값의 변경에 의해 타입이 변경될 수 있다.
- 변수는 값을 확인하기 전에는 타입을 확신할 수 없다.
- 유연성은 높지만 타입이 일관적이지 않아 신뢰성은 떨어진다.
- ex) 자바스크립트, 파이썬, PHP 등

### 자바스크립트 변수를 사용할 떄 주의사항

- 변수는 필요한 만큼 최소한으로 유지
- 변수의 유효 범위(스코프)는 최대한 좁게 만듬
- 전역 변수는 최대한 사용하지 않도록
- 상수(const)를 사용하여 값의 변경을 억제
- 목적이나 의미를 파악할 수 있도록 네이밍
